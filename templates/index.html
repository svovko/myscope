<!DOCTYPE html>
<html lang="en">
<head>
  <title>{{ title }}</title>

  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="msapplication-starturl" content="/">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-select.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/all.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/scope.css') }}">

  <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap-select.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/scope.js') }}"></script>

</head>

<body>

<img src="{{ url_for('video_feed') }}" alt="camera video">
<div id="messageBox" class="text-danger">Message window</div>
<button id="takePicture" type="button" class="btn text-danger"><i class="fas fa-camera"></i></button>

<!-- modal stars -->
<div class="modal fade" id="starsModal" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="background-color: black; color: red;">

            <div class="modal-header">
                <button type="button" class="close" id="closeStarsModal">&times;</button>
            </div>

            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                      <select class="form-control form-control-sm bg-dark text-danger" data-live-search="true" data-show-subtext="true" id="ids1">
                        <option value="">Select Star</option>
                        {% for key, value in stars.items() %}
                        <option value="{{ key }}" data-tokens="{{ value[0] }}">{{ value[0] }}</option>
                        {% endfor %}
                      </select>
                      <div class="input-group-append">
                          <button class="btn btn-danger" type="button" id="locateStar"><i class="fa fa-crosshairs"></i></button>
                          <button class="btn btn-danger" type="button" id="lookingAtStar"><i class="fa fa-eye"></i></button>
                     </div>
                  </div>
            </div>
        </div>
    </div>
</div>

<!-- modal messier objects -->
<div class="modal fade" id="MOModal" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="background-color: black; color: red;">

            <div class="modal-header">
                <button type="button" class="close" id="closeMOModal">&times;</button>
            </div>

            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                  <select class="form-control form-control-sm bg-dark text-danger" data-live-search="true" data-show-subtext="true" id="ids2">
                        <option value="">Select Messier Object</option>
                        {% set optGroup = 'blank' %}
                        {% for key, value in mo.items() %}
                        {%     if optGroup != 'blank' and optGroup != value[2] %}
                                   </optgroup>
                        {%     endif %}

                        {%     if optGroup != value[2] %}
                        {%         set optGroup = value[2] %}
                                   <optgroup label="{{ optGroup }}">
                        {%      endif %}
                                <option value="{{ key }}" data-tokens="{{ value[0].strip() }}">{{ value[0].strip() }} - {{ value[1] }}</option>
                        {% endfor %}
                        </optgroup>
                  </select>
                  <div class="input-group-append">
                      <button class="btn btn-danger" type="button" id="locateMO"><i class="fa fa-crosshairs"></i></button>
                  </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="top-left">
      <div class="btn-group">

        <button type="button" class="btn text-danger" onclick="setDisplay()"><i class="fas fa-tv"></i></button>
        <button type="button" class="btn text-danger" id="openStarsModal"><i class="fas fa-star"></i></button>
        <button type="button" class="btn text-danger" id="openMOModal"><i class="fas fa-spinner"></i></button>

          <div class="btn-group">
            <button type="button" class="btn text-danger dropdown-toggle" data-toggle="dropdown"><i class="fa fa-tachometer-alt"></i></button>
            <div class="dropdown-menu">
                {% set steps = [1, 5, 10, 20, 50, 100, 200, 500] %}
                {% for step in steps %}
                <button class="dropdown-item step" data-step="{{ step }}">{{ step }}x</button>
                {% endfor %}
            </div>
          </div>

          <div class="btn-group">
            <button type="button" class="btn text-danger dropdown-toggle" data-toggle="dropdown">ISO</button>
            <div class="dropdown-menu">
              <button class="dropdown-item isoButton" data-iso="100">100</button>
              <button class="dropdown-item isoButton" data-iso="200">200</button>
              <button class="dropdown-item isoButton" data-iso="300">300</button>
              <button class="dropdown-item isoButton" data-iso="400">400</button>
              <button class="dropdown-item isoButton" data-iso="800">800</button>
              <button class="dropdown-item isoButton" data-iso="1600">1600</button>
            </div>
          </div>

          <div class="btn-group">
            <button type="button" class="btn text-danger dropdown-toggle" data-toggle="dropdown">EXP</button>
            <div class="dropdown-menu">
              <button class="dropdown-item expButton" data-exp="0">Default</button>
              <button class="dropdown-item expButton" data-exp="1">1s</button>
              <button class="dropdown-item expButton" data-exp="2">2s</button>
              <button class="dropdown-item expButton" data-exp="3">3s</button>
              <button class="dropdown-item expButton" data-exp="4">4s</button>
              <button class="dropdown-item expButton" data-exp="5">5s</button>
              <button class="dropdown-item expButton" data-exp="6">6s</button>
            </div>
          </div>
      </div>
</div>

<div class="top-right">
    <div class="col text-right">
        <div class="btn-group">
        <button type="button" class="btn dropdown-toggle text-danger" data-toggle="dropdown">
            <i class="fas fa-times fs"></i> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-right" role="menu">
            <li><a class='dropdown-item' href='/exit'><i class="text-danger">Exit</i></a></li>
        </ul>
      </div>
    </div>
</div>

<!-- TODO - camera settings -->

<div class="h-100 d-flex flex-column px-2 bg-dark">

  <div class="flex-column justify-content-center px-2">
    <div class="row">
        <div class="col-1"></div>
        <div class="col text-center"><a class='text-danger direction' href='#' data-dir="up"><i class="fas fa-angle-up s_dir"></i></a></div>
        <div class="col-1"></div>
    </div>
  </div>

  <div class="flex-column justify-content-center px-2 d-flex flex-grow-1 h-100">
    <div class="row d-flex align-items-center">
        <div class="col-1"><a class='text-danger direction' href='#' data-dir="left"><i class="fas fa-angle-left s_dir"></i></a></div>

        <div class="col">
            <button type="button" class="btn btn-danger btn-block" id="btn_location">Set date & location</button>
            <div id="message" class="text-danger"></div>
        </div>

        <div class="col-1 text-right"><a class='text-danger direction' href='#' data-dir="right"><i class="fas fa-angle-right s_dir"></i></a></div>
    </div>
  </div>

  <div class="flex-column justify-content-center px-2">
    <div class="row">
        <div class="col-1"></div>
        <div class="col text-center"><a class='text-danger direction' href='#' data-dir="down"><i class="fas fa-angle-down s_dir"></i></a></div>
        <div class="col-1"></div>
    </div>
  </div>

</div>

</body>
</html>